<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>Michael Matyus</title>
    <meta name="description" content="Striving for a more semantic and accessible internet" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="css/teeth_main.css" />
    <script type="text/javascript">
      var toggle = function(){ document.body.className = document.body.className.indexOf('night') != -1 ? 'day' : 'day night'; }
    </script>
  </head>
  <body class="day">
    <button onclick="toggle()">AM/PM</button>
    <header class="visuallyhidden">
      <h1>Michael Matyus</h1>
    </header>
    <article>
      <div id="walk" class="walk">
        <img src="images/teeth1.gif" class="teeth" />
      </div>
    </article>

    <script type="text/javascript">
    var animationDuration = 'animationduration webkitAnimationDuration oanimationduration MSAnimationDuration'.split(' ');
    var animationIteration = 'animationiteration webkitAnimationIteration oanimationiteration MSAnimationIteration'.split(' ');

    var walk = document.getElementById('walk');

    var randomLatitude = function(){
      walk.parentElement.style.top = (Math.random() * (7 - 3 + 1) + 3)*10 + "%";
    }

    var calculateSpeed = function(){
      var windowWidth = window.innerWidth;
      var duration = (((windowWidth < 500 ? 0.5 : 5)/windowWidth)*1000)*60 + 's';
      for(var i = 0; i < animationDuration.length; i++){
        if(animationDuration[i] in walk.style) {
          console.log(duration);
          walk.style[animationDuration[i]] = duration;
        }
      }
    }

    for(var i = 0; i < animationIteration.length; i++){
      walk.addEventListener(animationIteration[i],randomLatitude,false);
    }

    var callable = true;

    window.onresize = function(){
      if(callable){
        callable = false;
        calculateSpeed();
        window.setTimeout(function(){
          callable = true;
        },1000);
      }
    };

    window.onready = calculateSpeed();

    var hour = new Date().getHours();

    if(hour < 7 || hour > (9 + 12)) {
      document.body.className = 'day night';
    }

    </script>
    <script>
      var _gaq=[['_setAccount','UA-23920757-1'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));
    </script>
  </body>
</html>
